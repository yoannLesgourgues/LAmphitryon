-- phpMyAdmin SQL Dump
-- version 5.2.0
-- https://www.phpmyadmin.net/
--
-- Hôte : localhost
-- Généré le : ven. 26 jan. 2024 à 16:48
-- Version du serveur : 10.5.15-MariaDB-0+deb11u1
-- Version de PHP : 8.1.11

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Base de données : `ylesgourgues_Amphitryon`
--

-- --------------------------------------------------------

--
-- Structure de la table `CATEGORIEPLAT`
--

CREATE TABLE `CATEGORIEPLAT` (
  `IDCATEG` int(11) NOT NULL,
  `NOMCATEG` char(32) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `CATEGORIEPLAT`
--

INSERT INTO `CATEGORIEPLAT` (`IDCATEG`, `NOMCATEG`) VALUES
(1, 'plat_principal'),
(2, 'entree'),
(3, 'dessert');

-- --------------------------------------------------------

--
-- Structure de la table `COMMANDE`
--

CREATE TABLE `COMMANDE` (
  `IDCOMMANDE` int(11) NOT NULL,
  `DATE_SERVICE` date NOT NULL,
  `NUMTABLE` int(11) NOT NULL,
  `IDSERVICE` int(11) NOT NULL,
  `HEURECOMMANDE` time DEFAULT NULL,
  `ETATCOMMANDE` char(32) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `COMMANDE`
--

INSERT INTO `COMMANDE` (`IDCOMMANDE`, `DATE_SERVICE`, `NUMTABLE`, `IDSERVICE`, `HEURECOMMANDE`, `ETATCOMMANDE`) VALUES
(1, '2024-01-26', 1, 1, '13:27:48', 'non réglée');

-- --------------------------------------------------------

--
-- Structure de la table `COMMANDER`
--

CREATE TABLE `COMMANDER` (
  `IDPLAT` int(11) NOT NULL,
  `IDCOMMANDE` int(11) NOT NULL,
  `ETATPLAT` char(32) DEFAULT NULL,
  `INFOSCOMPLEMENTAIRES` char(32) DEFAULT NULL,
  `QUANTITE` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `COMMANDER`
--

INSERT INTO `COMMANDER` (`IDPLAT`, `IDCOMMANDE`, `ETATPLAT`, `INFOSCOMPLEMENTAIRES`, `QUANTITE`) VALUES
(1, 1, 'commandé', 'il est pas vegan', 2);

-- --------------------------------------------------------

--
-- Structure de la table `DATE_SERVICE`
--

CREATE TABLE `DATE_SERVICE` (
  `DATE_SERVICE` date NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `DATE_SERVICE`
--

INSERT INTO `DATE_SERVICE` (`DATE_SERVICE`) VALUES
('2024-01-26'),
('2024-02-14');

-- --------------------------------------------------------

--
-- Structure de la table `PLAT`
--

CREATE TABLE `PLAT` (
  `IDPLAT` int(11) NOT NULL,
  `IDCATEG` int(11) NOT NULL,
  `NOMPLAT` char(32) DEFAULT NULL,
  `DESCRIPTIF` char(32) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `PLAT`
--

INSERT INTO `PLAT` (`IDPLAT`, `IDCATEG`, `NOMPLAT`, `DESCRIPTIF`) VALUES
(1, 1, 'entrecôte', 'vive la viande'),
(2, 3, 'Flan', 'tres moelleux'),
(3, 2, 'Salade', 'tres vert');

-- --------------------------------------------------------

--
-- Structure de la table `PROPOSERPLAT`
--

CREATE TABLE `PROPOSERPLAT` (
  `IDSERVICE` int(11) NOT NULL,
  `IDPLAT` int(11) NOT NULL,
  `DATE_SERVICE` date NOT NULL,
  `QUANTITEPROPOSEE` int(11) DEFAULT NULL,
  `PRIXVENTE` decimal(15,2) DEFAULT NULL,
  `QUANTITEVENDUE` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `PROPOSERPLAT`
--

INSERT INTO `PROPOSERPLAT` (`IDSERVICE`, `IDPLAT`, `DATE_SERVICE`, `QUANTITEPROPOSEE`, `PRIXVENTE`, `QUANTITEVENDUE`) VALUES
(1, 1, '2024-01-26', 10, '1.00', 10),
(1, 1, '2024-02-14', 100, '5.00', 10),
(1, 2, '2024-02-14', 10, '5.00', 10),
(1, 3, '2024-02-14', 100, '50.00', 10),
(2, 1, '2024-02-14', 10, '5.00', 10),
(3, 2, '2024-02-14', 100, '7.00', 10),
(3, 3, '2024-02-14', 100, '5.00', 10);

-- --------------------------------------------------------

--
-- Structure de la table `SERVICE`
--

CREATE TABLE `SERVICE` (
  `IDSERVICE` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `SERVICE`
--

INSERT INTO `SERVICE` (`IDSERVICE`) VALUES
(1),
(2),
(3);

-- --------------------------------------------------------

--
-- Structure de la table `STATUTUTILISATEUR`
--

CREATE TABLE `STATUTUTILISATEUR` (
  `IDSTATUT` int(11) NOT NULL,
  `NOMSTATUT` char(32) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `STATUTUTILISATEUR`
--

INSERT INTO `STATUTUTILISATEUR` (`IDSTATUT`, `NOMSTATUT`) VALUES
(1, 'serveur'),
(2, 'chef_cuisinier'),
(3, 'chef_salle');

-- --------------------------------------------------------

--
-- Structure de la table `TABLE_RESTO`
--

CREATE TABLE `TABLE_RESTO` (
  `IDSERVICE` int(11) NOT NULL,
  `DATE_SERVICE` date NOT NULL,
  `NUMTABLE` int(11) NOT NULL,
  `IDUTILISATEUR` int(11) NOT NULL,
  `NOMBREPLACE` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `TABLE_RESTO`
--

INSERT INTO `TABLE_RESTO` (`IDSERVICE`, `DATE_SERVICE`, `NUMTABLE`, `IDUTILISATEUR`, `NOMBREPLACE`) VALUES
(1, '2024-01-26', 1, 1, 4);

-- --------------------------------------------------------

--
-- Structure de la table `UTILISATEUR`
--

CREATE TABLE `UTILISATEUR` (
  `IDUTILISATEUR` int(11) NOT NULL,
  `IDSTATUT` int(11) NOT NULL,
  `LOGIN` char(32) DEFAULT NULL,
  `MDP` char(32) DEFAULT NULL,
  `NOM` char(32) DEFAULT NULL,
  `PRENOM` char(32) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `UTILISATEUR`
--

INSERT INTO `UTILISATEUR` (`IDUTILISATEUR`, `IDSTATUT`, `LOGIN`, `MDP`, `NOM`, `PRENOM`) VALUES
(1, 1, 'corentin', 'corentin', 'lartigue', 'coco');

--
-- Index pour les tables déchargées
--

--
-- Index pour la table `CATEGORIEPLAT`
--
ALTER TABLE `CATEGORIEPLAT`
  ADD PRIMARY KEY (`IDCATEG`);

--
-- Index pour la table `COMMANDE`
--
ALTER TABLE `COMMANDE`
  ADD PRIMARY KEY (`IDCOMMANDE`),
  ADD KEY `FK_COMMANDE_TABLE_RESTO` (`IDSERVICE`,`DATE_SERVICE`,`NUMTABLE`);

--
-- Index pour la table `COMMANDER`
--
ALTER TABLE `COMMANDER`
  ADD PRIMARY KEY (`IDPLAT`,`IDCOMMANDE`),
  ADD KEY `FK_COMMANDER_COMMANDE` (`IDCOMMANDE`);

--
-- Index pour la table `DATE_SERVICE`
--
ALTER TABLE `DATE_SERVICE`
  ADD PRIMARY KEY (`DATE_SERVICE`);

--
-- Index pour la table `PLAT`
--
ALTER TABLE `PLAT`
  ADD PRIMARY KEY (`IDPLAT`),
  ADD KEY `FK_PLAT_CATEGORIEPLAT` (`IDCATEG`);

--
-- Index pour la table `PROPOSERPLAT`
--
ALTER TABLE `PROPOSERPLAT`
  ADD PRIMARY KEY (`IDSERVICE`,`IDPLAT`,`DATE_SERVICE`),
  ADD KEY `FK_PROPOSERPLAT_PLAT` (`IDPLAT`),
  ADD KEY `FK_PROPOSERPLAT_DATE_SERVICE` (`DATE_SERVICE`);

--
-- Index pour la table `SERVICE`
--
ALTER TABLE `SERVICE`
  ADD PRIMARY KEY (`IDSERVICE`);

--
-- Index pour la table `STATUTUTILISATEUR`
--
ALTER TABLE `STATUTUTILISATEUR`
  ADD PRIMARY KEY (`IDSTATUT`);

--
-- Index pour la table `TABLE_RESTO`
--
ALTER TABLE `TABLE_RESTO`
  ADD PRIMARY KEY (`IDSERVICE`,`DATE_SERVICE`,`NUMTABLE`),
  ADD KEY `FK_TABLE_RESTO_DATE_SERVICE` (`DATE_SERVICE`),
  ADD KEY `FK_TABLE_RESTO_UTILISATEUR` (`IDUTILISATEUR`);

--
-- Index pour la table `UTILISATEUR`
--
ALTER TABLE `UTILISATEUR`
  ADD PRIMARY KEY (`IDUTILISATEUR`),
  ADD KEY `FK_UTILISATEUR_STATUTUTILISATEUR` (`IDSTATUT`);

--
-- AUTO_INCREMENT pour les tables déchargées
--

--
-- AUTO_INCREMENT pour la table `CATEGORIEPLAT`
--
ALTER TABLE `CATEGORIEPLAT`
  MODIFY `IDCATEG` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT pour la table `COMMANDE`
--
ALTER TABLE `COMMANDE`
  MODIFY `IDCOMMANDE` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT pour la table `PLAT`
--
ALTER TABLE `PLAT`
  MODIFY `IDPLAT` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT pour la table `SERVICE`
--
ALTER TABLE `SERVICE`
  MODIFY `IDSERVICE` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT pour la table `STATUTUTILISATEUR`
--
ALTER TABLE `STATUTUTILISATEUR`
  MODIFY `IDSTATUT` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT pour la table `UTILISATEUR`
--
ALTER TABLE `UTILISATEUR`
  MODIFY `IDUTILISATEUR` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- Contraintes pour les tables déchargées
--

--
-- Contraintes pour la table `COMMANDE`
--
ALTER TABLE `COMMANDE`
  ADD CONSTRAINT `FK_COMMANDE_TABLE_RESTO` FOREIGN KEY (`IDSERVICE`,`DATE_SERVICE`,`NUMTABLE`) REFERENCES `TABLE_RESTO` (`IDSERVICE`, `DATE_SERVICE`, `NUMTABLE`);

--
-- Contraintes pour la table `COMMANDER`
--
ALTER TABLE `COMMANDER`
  ADD CONSTRAINT `FK_COMMANDER_COMMANDE` FOREIGN KEY (`IDCOMMANDE`) REFERENCES `COMMANDE` (`IDCOMMANDE`),
  ADD CONSTRAINT `FK_COMMANDER_PLAT` FOREIGN KEY (`IDPLAT`) REFERENCES `PLAT` (`IDPLAT`);

--
-- Contraintes pour la table `PLAT`
--
ALTER TABLE `PLAT`
  ADD CONSTRAINT `FK_PLAT_CATEGORIEPLAT` FOREIGN KEY (`IDCATEG`) REFERENCES `CATEGORIEPLAT` (`IDCATEG`);

--
-- Contraintes pour la table `PROPOSERPLAT`
--
ALTER TABLE `PROPOSERPLAT`
  ADD CONSTRAINT `FK_PROPOSERPLAT_DATE_SERVICE` FOREIGN KEY (`DATE_SERVICE`) REFERENCES `DATE_SERVICE` (`DATE_SERVICE`),
  ADD CONSTRAINT `FK_PROPOSERPLAT_PLAT` FOREIGN KEY (`IDPLAT`) REFERENCES `PLAT` (`IDPLAT`),
  ADD CONSTRAINT `FK_PROPOSERPLAT_SERVICE` FOREIGN KEY (`IDSERVICE`) REFERENCES `SERVICE` (`IDSERVICE`);

--
-- Contraintes pour la table `TABLE_RESTO`
--
ALTER TABLE `TABLE_RESTO`
  ADD CONSTRAINT `FK_TABLE_RESTO_DATE_SERVICE` FOREIGN KEY (`DATE_SERVICE`) REFERENCES `DATE_SERVICE` (`DATE_SERVICE`),
  ADD CONSTRAINT `FK_TABLE_RESTO_SERVICE` FOREIGN KEY (`IDSERVICE`) REFERENCES `SERVICE` (`IDSERVICE`),
  ADD CONSTRAINT `FK_TABLE_RESTO_UTILISATEUR` FOREIGN KEY (`IDUTILISATEUR`) REFERENCES `UTILISATEUR` (`IDUTILISATEUR`);

--
-- Contraintes pour la table `UTILISATEUR`
--
ALTER TABLE `UTILISATEUR`
  ADD CONSTRAINT `FK_UTILISATEUR_STATUTUTILISATEUR` FOREIGN KEY (`IDSTATUT`) REFERENCES `STATUTUTILISATEUR` (`IDSTATUT`);
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
